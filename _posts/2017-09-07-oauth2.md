---
layout: post
title:  "OAuth 2.0"
date:   2017-09-07 14:58:11 -0400
categories: article
---

User 

Application

Passwords are never passed from server to server in an OAuth 2.0 framework

Authentication server


Resource server


Process:

	1. Application send a authorization request to Authentication server.

	Facebook's authoriztion screen asked you to authorize Spotify to access you facebook account information and profile picture.

	2. Authorization grant
	The authorization is send back to Spotify with 
	Application take the authorization grant including the authorization code, use it to request an access token from the authorization server. There's not any resource information in the Authorization server.

	The Authorization server is only responsible for authorizaing applier as an user and providing the proper access token that will eventualy allow Spotify to retrieve the protected information from the resource server.

	Ater the authorization server accept the authoraztion grant and code. The Facebook authorization server provides Spotify with an access token specifically for applier.

	Then then user can send request with access token to the resource server to query facebook information then show those information on the front end.

	In order for all of this to work though, the application developer needed to register his application with Facebook API service.

	Independent of any user involvement, the application developer needs to provide the API with the applicaiton name, website and the URL. The Facebook's authorization screen will redirect the user after they have authorized access to their account 

	Get: https://github.com/login/oauth/authorize?client_id=xxxxxxxx&redirect_uri=https:xxxxxxxx&scope=xxxxxxx&status=xxxxxxx

	Real example:
	https://github.com/login/oauth/authorize?client_id=1d46d447dfcd2ccd7b18&redirect_uri=https://codepen.io/login/auth_callback&scope=user:email gist&state=919685ac1986b65a32793ac1556ed840

	当用户登录同时点击之后，会向 /login/oauth/authorize 发送一个post请求,同时请求会包含上面的这些参数。
	然后github知道，哦，原来是这个client_id=1d46d447dfcd2ccd7b18的哥们儿要进入当前这个姐们儿的账户看信息。而且这个姐们儿也同意了。
	callback URL 是用来当用户说同意，通过github登陆的时候，github会发送一个grant code到那个application的callback URL。
	这个这个application(姐们儿)就能拿到一个

	然后application(姐们儿)就发送一个post request，到 https://github.com/login/oauth/access_token with client_id, client_secret, code(grant code 前面发回来的), redirect_uri, state再到GitHub web server.
	Github server(authorization server) 看见我发来的这些东西，主要是client_secret 和 grant code，然后ok，看来你已经被authorized了，那我就赐你一个万能钥匙(access_token)，这个access_token将会被发送回那个姐们儿的redirect_url。这样，姐们儿成功获取进入小六子的账户(resource server)的万能钥匙(access_token)，姐们儿就可以随时跑进小六子的账户去看数据了。只要每次发送get request的时候带上这个access_token，姐们儿就可以直接进入了。




	post 

	3. Application 


	When I use login in CodePen, I either use my codepen username and password, or can choose to login by Github account.

	When I choose login via Github, the page will jump to Github's authorizaiton page. 

	If I've logged in my Github account, there is only a authorize button. I can only click the button to authorize CodePen to obtain my Github profile information. Then using this to login in CodePen.

	If I do not login my Github account. There will be a form to input username and password. After I login my Github account, then I can click the Authorize button.



